import{a as y,b as f,c as O,d as _,e as z,f as X,g as w,h as $,i as I}from"./chunk-2YGQYII2.js";import{a as S,b as A,c as N,d as D,e as C,f as B,g as M,h as U,i as V,j,l as k,m as L}from"./chunk-KLLSPD2E.js";import{a as g}from"./chunk-DYCPFO4Y.js";var l={"toast-container":"e","toast-holder":"s","toast-card":"o","toast-card-close-button-hover":"n","toast-close-button":"a","toast-text-container":"r","toast-icon-container":"l","toast-icon":"i","toast-close-button-text":"c","toast-close-button-top-right":"d","toast-close-button-top-left":"f","toast-close-button-inline":"p","toast-close-button-inline-top":"m"};var K={"not important":"off",important:"polite",critical:"assertive"};function Q(o){if(document.getElementById("toast-holder"))return;let e=O;O||(e=f("section"));let t=f("div");t.classList.add(l["toast-holder"]),t.id="toast-holder",t.setAttribute("data-max-toasts",o?.max_toasts_visible?.toString()||3 .toString()),t.setAttribute("data-testid","toast-holder"),e.title="Notifications",o?.stacked&&(e.setAttribute("aria-label","Notifications"),t.setAttribute("data-stacked",o?.stacked+"")),o?.hide_overflow_toast&&t.setAttribute("data-hide-overflow-toast","true"),o?.container_offset!=null&&(e.style.width=`calc(100% - ${o.container_offset}px)`,e.style.height=`calc(100% - ${o.container_offset}px)`),e.classList.add(l["toast-container"]),e.append(t),O||document.body.append(e)}g(Q,"initialize_toast");function b(o,{animation:e=B,close_button:t=!0,toast_position:i=D,toast_id:r=void 0,custom_icon:p=void 0,importance:q="not important",icon_position:F=N,animation_duration:E={in:400,out:400},shadow_size:R=U,automatically_close:G=!0,dir:W="ltr",colors:P=C,duration:H=3e3}={animation:B,close_button:!0,toast_position:D,toast_id:void 0,custom_icon:void 0,animation_duration:{in:400,out:400},icon_position:N,importance:"not important",shadow_size:void 0,automatically_close:!0,dir:"ltr",colors:C,duration:3e3},m="neutral"){let h=y("#toast-holder");if(!h){let s=new Error("Toast container has not been mounted yet. Try calling initialize_toast() first.");throw alert(s),console.error(s),s}if(m=="loading"&&t==!0)throw alert("A loading toast should not be manually closed."),console.error(new Error("A loading toast should not be manually closed.")),new Error("A loading toast should not be manually closed.");if(!h.classList.contains("toast-"+i))for(let s of j)h.classList.remove("toast-"+s);r||(r=X()),h.classList.add("toast-"+i);let{title:Y,message:Z}=o,a=f("div"),v=f("div"),x=f("p"),u,T,n;if(Y&&(u=f("div"),u.setAttribute("aria-label","The title of toast #"+r),u.id="toast-"+r+"-title",u.textContent=Y),p||m!="neutral")if(T=f("div"),T.classList.add(l["toast-icon-container"]),p)I(T,p),typeof p!="string"&&p.classList.add(l["toast-icon"]);else{let s=w(m);s.classList.add(l["toast-icon"]),T?.append(s)}if(a.id=r,a.classList.add(l["toast-card"]),a.setAttribute("data-vanilla-toast","true"),z(a,m),a.setAttribute("aria-atomic","true"),a.setAttribute("data-type",m),a.setAttribute("aria-live",K[q]),a.setAttribute("data-color-type",P),a.setAttribute("dir",W),R&&import("./consts-O4MBLB2K.js").then(s=>{a.style.setProperty("--toast-box-shadow",s.BOX_SHADOW_SIZES[R||U])}),_.matches||(a.setAttribute("data-exit-animation-duration",E?.out?.toString()),a.style.setProperty("--toast-animation-duration",E?.in+"ms")),a.style.setProperty("--toast-animation",e),(P=="icon"||P=="icon-stroke")&&import("./icon.module-XIRHFTS7.js").then(s=>{let c="toast-card";a.classList.add(s.default[c])}),v.classList.add(l["toast-text-container"]),x.id="toast-"+r+"-message",x.textContent=Z,x.setAttribute("aria-label","The message of toast #"+r),u&&v.append(u),a.setAttribute("aria-labelledby",u?u.id:x.id),v.append(x),m!="loading"&&t){let s;if(n=f("button"),typeof t!="boolean"){if(t?.appearance=="visible-on-hover"&&a.classList.add(l["toast-card-close-button-hover"]),t.custom_button?.on_click?s=g(function(){typeof t!="boolean"&&t?.custom_button?.on_click&&t?.custom_button?.on_click(r),d.dismiss(r)},"handle_close_button_click"):s=g(function(){d.dismiss(r)},"handle_close_button_click"),n.classList.add(l["toast-close-button-"+(t?.position||M)]),t.type=="text")n.classList.add(l["toast-close-button-text"]),n.style.setProperty("--toast-close-button-border-radius","0.25rem"),n.textContent=t?.text||"close";else if(t?.type=="icon")if(t.custom_icon)I(n,t?.custom_icon);else{let c=w("close");c.classList.add(l["toast-icon"]),n?.append(c)}else{let c=w("close");c.classList.add(l["toast-icon"]),n?.append(c)}t?.custom_button?.className&&(n.className+=" "+t.custom_button.className)}else{s=g(function(){d.dismiss(r)},"handle_close_button_click");let c=w("close");c.classList.add(l["toast-icon"]),n?.append(c),n.classList.add(l["toast-close-button-"+M])}if(typeof t!="boolean"&&t.position=="inline-top"&&n.classList.add("toast-close-button-inline-top"),n.setAttribute("aria-label","Close toast #"+r),n.classList.add(l["toast-close-button"]),n.setAttribute("type","button"),n.setAttribute("aria-controls",r),n.tabIndex=-1,s){let c=new AbortController;L.set(r,c),n.addEventListener("click",s,{signal:c.signal,once:!0})}else console.error("Function to invoke for a close button does not exist!")}if(m!="neutral"&&F=="left"?a.append(T):m!="loading"&&(typeof t!="boolean"&&(t?.position=="inline"||t?.position=="inline-top")||t)&&a.append(n),a.append(v),m!="neutral"&&F=="right"?(a.append(T),v.style.textAlign="right"):m!="loading"&&(typeof t!="boolean"&&(t?.position=="inline"||t?.position=="inline-top")||t)&&a.append(n),(i=="bottom-center"||i=="bottom-left"||i=="bottom-right")&&(h.style.flexDirection="column"),h.append(a),h.getAttribute("data-hide-overflow-toasts")=="true"&&import("./hide-toast-I7AXDHL7.js").then(s=>{s.hide_old_toasts()}),m!="loading"&&G==!0){let s=setTimeout(()=>{d.dismiss(r)},_.matches?H:H-E?.out);k.set(r,s)}return{toast_id:r}}g(b,"show_toast");var d=g(function(o,e,t){return b(o,e,t)},"toast");d.success=function(o,e){return b(o,e,"success")};d.error=function(o,e){return b(o,e,"error")};d.warn=function(o,e){return b(o,e,"warn")};d.info=function(o,e){return b(o,e,"info")};d.loading=function(o,e){return b(o,e,"loading")};d.promise=async function(o,e){let{toast_id:t}=b({message:"loading..."},{automatically_close:!1,close_button:!1}),i=y("#"+CSS.escape(t)),r=y(`#toast-${CSS.escape(t)}-message`);try{let p=await o(...e);return r.textContent="Success!",i.setAttribute("data-type","success"),p}catch(p){return r.textContent="Error",i.setAttribute("data-type","error"),console.log(p?.message||p),p}};d.dismiss=function(o){let e=_.matches,t=y("#toast-holder"),i=y(`#${CSS.escape(o)}`);t||console.error("Toast container does not exist!"),i||console.error("Toast does not exist!"),L.get(o)?.abort(),L.delete(o),clearTimeout(k.get(o)),k.delete(o),i.getAttribute("aria-hidden")=="true"||e?t.removeChild(i):(i.style.setProperty("--toast-animation-direction","reverse"),i.style.setProperty("--toast-animation-fill-mode","forwards"),$(i),setTimeout(()=>{t.removeChild(i)},+i.getAttribute("data-exit-animation-duration")))};export{Q as initialize_toast,d as toast};
//# sourceMappingURL=index.js.map
