import{a as i}from"./chunk-WFK4QYFV.min.mjs";var U=document.querySelector.bind(document),F=document.querySelectorAll.bind(document),r=document.getElementById.bind(document),$=document.createElement.bind(document),b=document.createElementNS.bind(document),X=document.createAttribute.bind(document),K=document.createAttributeNS.bind(document);var x={x:"right",y:"top"},p={loading_icon:"eclipse",dir:I(),role:"status",importance:"important",lifetime:5e3,animation_duration:300,automatically_close:!0,close_button:{is_shown_on_hover:!0,position:"right"},theme:"system",style:"glass"},S=window.matchMedia("(prefers-reduced-motion)");function I(){let o=document.documentElement.getAttribute("dir");return o=="ltr"||o=="rtl"?o:o=="auto"||!o?window.getComputedStyle(document.documentElement).direction:"ltr"}i(I,"get_dir");function E(o,t){return t?((!t.lifetime||t.lifetime<=0)&&(t.lifetime=p.lifetime),t.loading_icon||(t.loading_icon="eclipse"),S.matches?t.animation_duration=0:t.animation_duration!=0&&!t.animation_duration&&(t.animation_duration=p.animation_duration),t.importance||(o=="error"||o=="loading"||o=="success"||o=="warn"?t.importance="critical":t.importance="important"),t.role||(o=="error"||o=="loading"||o=="success"||o=="warn"?t.role="alert":t.role="status"),t.automatically_close==null&&o!="loading"&&(t.automatically_close=!0),t.close_button?t.close_button.is_shown_on_hover==null?t.close_button.is_shown_on_hover=p.close_button.is_shown_on_hover:t.close_button.position==null?t.close_button.position=p.close_button.position:t.close_button.position!="left"&&t.close_button.position!="right"&&(t.close_button.position="right"):t.close_button=p.close_button,(!t.theme||t.theme!="dark"&&t.theme!="light"&&t.theme!="system")&&(t.theme=p.theme),(!t.dir||t.dir!="ltr"&&t.dir!="rtl")&&(t.dir=p.dir),(!t.style||t.style!="glass"&&t.style!="icons"&&t.style!="monochrome"&&t.style!="plain")&&(t.style=p.style),t):p}i(E,"get_default");var H={"&":"amp","<":"lt",">":"gt",'"':"quot","'":"#39","/":"#x2F"};function T(o,t){return o!=null&&o!=null?o:t}i(T,"non_nullish");var C=i(o=>String(o).replace(/[&<>"'/\\]/g,t=>`&${H[t]};`),"escapeHtml");function m(o,t){let e=$(o);for(let[a,s]of Object.entries(T(t,{})))if(a=="style")for(let[n,d]of Object.entries(s))e.style.setProperty(n,d);else a=="textContent"?e.appendChild(document.createTextNode(s.toString())):s==!0?e.setAttribute(a,"true"):s!=!1&&s!=null?typeof s=="string"&&e.setAttribute(a,C(s)):s==!1&&e.removeAttribute(a);return e}i(m,"create_element");function f(o){let t=b("http://www.w3.org/2000/svg","svg"),e=b("http://www.w3.org/2000/svg","path");for(let[a,s]of Object.entries(T(o,{})))if(a=="d")e.setAttribute(a,s.toString());else if(a=="style")for(let[n,d]of Object.entries(T(s,{})))t.style[n]=d;else t.setAttribute(a,s.toString());return t.appendChild(e),t}i(f,"create_svg");var L=Object.freeze({"not important":"off",important:"polite",critical:"assertive"});var _={xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"currentColor",width:"20",height:"20","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round",viewBox:"0 0 20 20",style:{width:"1rem",height:"1rem"}};function N(){return f({..._,d:"M8.485 2.495c.673-1.167 2.357-1.167 3.03 0l6.28 10.875c.673 1.167-.17 2.625-1.516 2.625H3.72c-1.347 0-2.189-1.458-1.515-2.625L8.485 2.495zM10 5a.75.75 0 01.75.75v3.5a.75.75 0 01-1.5 0v-3.5A.75.75 0 0110 5zm0 9a1 1 0 100-2 1 1 0 000 2z"})}i(N,"warning_icon");function D(){return f({..._,d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z"})}i(D,"info_icon");function R(){return f({..._,d:"M16.704 4.153a.75.75 0 01.143 1.052l-8 10.5a.75.75 0 01-1.127.075l-4.5-4.5a.75.75 0 011.06-1.06l3.894 3.893 7.48-9.817a.75.75 0 011.05-.143z"})}i(R,"success_icon");function q(){return f({..._,d:"M6.28 5.22a.75.75 0 00-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 101.06 1.06L10 11.06l3.72 3.72a.75.75 0 101.06-1.06L11.06 10l3.72-3.72a.75.75 0 00-1.06-1.06L10 8.94 6.28 5.22z"})}i(q,"error_icon");function j(o="normal"){let t=m("div",{style:{width:"100%",height:"100%"}});switch(o){case"normal":import("./rolling-spinner-QT2RAF2I.min.mjs").then(e=>{t.innerHTML=e.rolling_spinner});break;case"broken-flat":import("./flat-broken-spinner-RDTBSF2V.min.mjs").then(e=>{t.innerHTML=e.flat_broken_spinner});break;case"broken-rounded":import("./rounded-broken-spinner-J3YHZ3XC.min.mjs").then(e=>{t.innerHTML=e.rounded_broken_spinner});break;case"broken-straight":import("./straight-broken-spinner-U64S7VQX.min.mjs").then(e=>{t.innerHTML=e.straight_broken_spinner});break;case"eclipse":import("./eclipse_spinner-GN2TDTNP.min.mjs").then(e=>{t.innerHTML=e.eclipse_spinner});break;default:import("./rolling-spinner-QT2RAF2I.min.mjs").then(e=>{t.innerHTML=e.rolling_spinner})}return t}i(j,"loading_icon");function g(o,t){switch(o){case"error":return q();case"info":return D();case"loading":return j(t);case"success":return R();case"warn":return N()}}i(g,"get_icon");var v=12,G=3,y=class{static{i(this,"Toast")}id;props;options;is_dismissed;type;idx;z_index;initial_height;offset;created_on;src_element;constructor(t,e,a,s,n,d,l){if(!r("toast-container")){console.error(new Error("Please mount the toast container first."));return}if(this.src_element=null,this.id=t,this.props=e,this.options=a,this.is_dismissed=s,this.type=n,this.idx=d,this.z_index=l,this.created_on=Date.now(),r("toast-container")){this.append_to_dom();let{packed_size:u,original_height:h}=O(this.src_element);r("toast-container").style.setProperty("--front-toast-height",u+"px"),this.src_element.style.setProperty("--toast-initial-height",u+"px"),this.initial_height=u,this.src_element.style.height=h,this.offset=0}}append_to_dom=()=>{let t=m("li",{dir:this.options.dir.toString(),"data-front-toast":!0,"data-vanilla-toast":!0,"data-dismissed":"false","data-theme":this.options.theme,"data-style":this.options.style,"data-type":this.type,id:`toast-${this.id}`,"aria-live":L[this.options.importance],"aria-atomic":!0,style:{"--toast-index":this.idx+"","--z-index":this.z_index+"","--toast-transition-duration":this.options.animation_duration+"ms","--toast-gap":v+"px","--toast-offset":"0px"}}),e=m("div",{"data-close-button-container":"true","data-position":this.options.close_button.position,"data-show-on-hover":this.options.close_button.is_shown_on_hover+""}),a=m("button",{type:"button",id:`close-toast-${this.id}`,"data-close-button":"true","aria-controls":`toast-${this.id}`,"aria-pressed":"false","aria-label":"Close Notification Toast"}),s=m("div",{"data-text-container":"true"}),n=m("p",{textContent:this.props.message,id:`message-toast-${this.id}`}),d=new AbortController,l=d.signal;if(c.aborters.set(`toast-${this.id}`,d),this.src_element=t,a.addEventListener("click",()=>{r(`close-toast-${this.id}`).setAttribute("aria-pressed","true"),c.dismiss(this.id)},{once:!0,signal:l}),this.type!="neutral"){let u=g(this.type,this.options.loading_icon),h=m("div",{"data-icon-container":"true",id:`icon-toast-${this.id}`});h.appendChild(u),this.src_element.append(h)}if(this.props.title){let u=m("h6",{textContent:this.props.title,id:`title-toast-${this.id}`,"data-title":"true"});s.append(u)}s.append(n),e.appendChild(a),this.src_element.append(s),this.src_element.append(e),r("toast-container").append(this.src_element),setTimeout(()=>{this.src_element.setAttribute("data-mounted","true")})};update_offset=()=>{this.src_element.style.setProperty("--toast-offset",this.offset+"px")};animate_out=()=>{this.src_element.setAttribute("data-dismissed",this.is_dismissed+"")};update_idx=()=>{this.idx>=G?(this.src_element.style.setProperty("--toast-opacity","0"),this.src_element.setAttribute("aria-hidden","true"),this.src_element.style.pointerEvents="none",this.src_element.style.touchAction="none"):this.is_dismissed||(this.src_element.style.setProperty("--toast-opacity","1"),this.src_element.setAttribute("aria-hidden","false"),this.src_element.style.pointerEvents="all",this.src_element.style.touchAction="auto"),this.idx==0&&(r("toast-container").style.setProperty("--front-toast-height",this.initial_height+"px"),r("toast-"+this.id).setAttribute("data-front-toast","true")),this.src_element.style.setProperty("--toast-index",this.idx+""),this.src_element.style.setProperty("--z-index",this.z_index+"")}};var w="abcdefghijklmnopqrstuvwxyz0123456789";function P(o=8){if(o<6)throw new Error("Please provide a string length that's greater than 6");if(o>16)throw new Error("Please provide a string length that's less than 16");let t="";for(let e=0;e<o;++e){let a=Math.floor(Math.random()*(w.length-1));Math.random()<.5?t+=w[a].toUpperCase():t+=w[a]}return t}i(P,"gen_random_id");var k=class{static{i(this,"Store")}toasts;listeners;timers;listeners_length;aborters;constructor(){this.listeners_length=0,this.timers=new Map,this.toasts=new Map,this.listeners=new Map,this.aborters=new Map}listen=t=>{let e=this.listeners_length++;return this.listeners.set(e,t),i(()=>{this.listeners_length--,this.listeners.delete(e)},"cleanup")};update=(t,e)=>{for(let a of this.listeners.values())a(t,e)};create=(t,e,a="neutral")=>{let s=P();e=E(a,e);let n=this.toasts.size,d=new y(s,t,e,!1,a,0,n);if(this.toasts.set(s,d),this.update(d,"add"),e.automatically_close){let l=setTimeout(()=>{this.dismiss(s)},e.lifetime-e.animation_duration);this.timers.set(`toast-${s}`,l)}return{toast_id:s}};dismiss=t=>{let e=this.toasts.get(t);e||console.error(new Error("Tried to remove a toast that does not exist!")),e.is_dismissed=!0;let a=setTimeout(()=>{this.$remove_toast(t)},e.options.animation_duration);this.timers.set(`toast-animation-${t}`,a),this.toasts.delete(t),this.update(e,"remove"),this.update(e,"animate-out")};add_timer=(t,e,a)=>{let s=this.toasts.get(t);if(s){let n=setTimeout(()=>{this.dismiss(t)},e);a?s.created_on=a:s.created_on=Date.now()-s.created_on,this.timers.set(`toast-${t}`,n)}};remove_timer=t=>{let e=`toast-${t}`,a=`toast-animation-${t}`,s=this.timers.get(e),n=this.timers.get(a);clearTimeout(s),clearTimeout(n),this.timers.delete(e),this.timers.delete(a)};update_toast=(t,e,a="neutral",s)=>{if(!t)return;let n=this.toasts.get(t);if(n){if(n.options.automatically_close=!0,n.props.message=e.message,r(`message-toast-${t}`).textContent=e.message,r(`toast-${t}`).setAttribute("data-type",a),n.props.title&&(n.props.title=e.title,r(`title-toast-${t}`).textContent=e.title),(!s||s.automatically_close==null||a!="loading")&&n.options.automatically_close==!0,n.options.automatically_close&&a!="loading"&&n.type=="loading"&&this.add_timer(t,n.options.lifetime,Date.now()),n.type!="neutral"&&a=="neutral"){let d=r(`icon-toast-${t}`);d&&r(`toast-${t}`).removeChild(d)}if(n.type!=a){let d=r(`icon-toast-${t}`);d&&r(`toast-${t}`).removeChild(d);let l=g(a,s?.loading_icon||"normal");r(`toast-${t}`).prepend(l)}}};$remove_toast=t=>{let e=r(`toast-${t}`);r("toast-container").removeChild(e),this.remove_timer(t);let a=this.aborters.get(`toast-${t}`);a&&a.abort(),this.aborters.delete(`toast-${t}`)}},c=new k;function A(o){return[...c.toasts.values()].reduce((t,e,a)=>a<=o.z_index?t:t+e.initial_height,0)}i(A,"calculate_total_height_of_previous_toasts");function M(o,t,e){return Math.floor(o*t+e)}i(M,"calculate_toast_offset");function O(o){let t=o.style.height;o.style.height="auto";let e=o.getBoundingClientRect().height;return{original_height:t,packed_size:e}}i(O,"get_height");c.listen((o,t)=>{if(t=="add")for(let e of c.toasts.values()){if(o.id==e.id)continue;r("toast-"+e.id).setAttribute("data-front-toast","false");let a=A(e),s=M(++e.idx,v,a);e.offset=s,e.update_idx(),e.update_offset()}else if(t=="animate-out")o.animate_out();else if(t=="remove"){for(let e of c.toasts.values())if(r("toast-"+e.id).setAttribute("data-front-toast","false"),o.idx>e.idx&&(--e.z_index,e.update_idx()),o.idx<e.idx){let a=A(e),s=M(--e.idx,v,a);e.offset=s,e.update_idx(),e.update_offset()}}});function z(){let o=!1,t=[],e=[];window.addEventListener("keydown",l=>{l.altKey?(l.key=="t"||l.key=="T")&&!o&&(o=!0,n(s),r("toast-container").setAttribute("data-expanded","true")):o&&l.key=="Escape"&&(o=!1,n(a),r("toast-container").setAttribute("data-expanded","false"))}),r("toast-container").addEventListener("pointerenter",()=>{o||(n(s),o=!0,r("toast-container").setAttribute("data-expanded","true"))}),r("toast-container").addEventListener("pointerleave",()=>{o&&(n(a),o=!1,r("toast-container").setAttribute("data-expanded","false"))});function a(){for(let l=t.length-1;l>=0;--l){let u=t[l];c.add_timer(u.toast_id,u.time_left,u.removed_on),t.pop()}}i(a,"add_timers");function s(){for(let l of c.toasts.values())if(l.options.automatically_close){let u=l.options.lifetime-(Date.now()-l.created_on);u>=l.options.animation_duration&&(c.remove_timer(l.id),t.push({toast_id:l.id,time_left:u,removed_on:Date.now()}))}}i(s,"remove_timers");function n(l){e.push(l),d()}i(n,"enqueue");function d(){let l=e.shift();l&&l()}i(d,"process_queue")}i(z,"listen_to_page_events");function V(o){if(r("toast-section-container"))return;let e=m("section",{"aria-label":"Notifcations (Alt + T). Escape to unexpand.","data-toast-section-container":"true","data-testid":"toast-section-container",id:"toast-section-container"}),a=m("ol",{"data-expanded":o?.is_expanded_by_default!=null?o.is_expanded_by_default+"":"false","data-position-x":o?.position?.x||x.x,"data-position-y":o?.position?.y||x.y,"data-toast-container":"true","data-testid":"container",id:"toast-container","aria-describedby":"toast-section-heading"}),s=m("h6",{id:"toast-section-heading",textContent:"A section of notifications"});e.append(s),e.append(a),document.body.append(e),o?.is_expanded_by_default||z()}i(V,"mount_toaster");var B={default:c.create,success(o,t){return c.create(o,t,"success")},error(o,t){return c.create(o,t,"error")},info(o,t){return c.create(o,t,"info")},warn(o,t){return c.create(o,t,"warn")},loading(o,t){return c.create(o,t,"loading")},async promise(o,...t){let{toast_id:e}=B.loading({message:"Loading..."});try{let a=await o(...t);return c.update_toast(e,{message:"Success!"},"success"),a}catch(a){return console.error(a),c.update_toast(e,{message:"Something went wrong!"},"error"),a}},dismiss:c.dismiss};export{V as mount_toaster,B as toast};
//# sourceMappingURL=index.min.mjs.map
